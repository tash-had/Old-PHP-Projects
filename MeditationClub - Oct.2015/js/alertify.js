var Alertify=function(a,b){"use strict";var d,c=a.document;d=function(){function p(a){return c.getElementById(a)}function q(a){"undefined"!==typeof j&&a.parentNode===j&&j.removeChild(a)}function r(){if(!m){var a=c.createElement("fakeelement"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(var e in d)if(d.hasOwnProperty(e)&&a.style[e]!==b){m=d[e],n=!0;break}}return{type:m,supported:n}}var a,g,h,i,j,k,l,m,d=!1,f=[],n=!1,o={buttons:{holder:"<nav class='alertify-buttons'>{{buttons}}</nav>",ok:"<button class='alertify-button alertify-button-ok' id='alertify-ok'>{{ok}}</button>",cancel:"<button class='alertify-button alertify-button-cancel' id='alertify-cancel'>{{cancel}}</button>"},input:"<div class='alertify-text-wrapper'><input type='text' class='alertify-text' id='alertify-text'></div>",message:"<p class='alertify-message'>{{message}}</p>",log:"<div class='alertify-log{{class}}'>{{message}}</div>"},s={defaultOkLabel:"Ok",okLabel:this.defaultOkLabel,defaultCancelLabel:"Cancel",cancelLabel:this.defaultCancelLabel,defaultMaxLogItems:2,maxLogItems:this.defaultMaxLogItems,promptValue:"",promptPlaceholder:"",delay:5e3,defaultDelay:5e3,transition:b,addListeners:function(a,b){var c="undefined"!==typeof h,d="undefined"!==typeof g,i=this,j=function(){i.hide(),c&&h.removeEventListener("click",k),d&&g.removeEventListener("click",m)},k=function(b){j(b),"function"===typeof a&&("undefined"===typeof l?a(b):a(l.value,b))},m=function(a){j(a),"function"===typeof b&&b(a)};c&&h.addEventListener("click",k),d&&g.addEventListener("click",m)},build:function(a){var c=(a.cssClass||"",o.buttons.ok),d="<div class='alertify-dialog'><div class='alertify-inner'>"+o.message.replace("{{message}}",a.message);return("confirm"===a.type||"prompt"===a.type)&&(c=o.buttons.cancel+o.buttons.ok),"prompt"===a.type&&(d+=o.input),d=(d+o.buttons.holder+"</div></div>").replace("{{buttons}}",c).replace("{{ok}}",this.okLabel).replace("{{cancel}}",this.cancelLabel),i.className="alertify",d},closeLogOnClick:!1,closeLogOnClickDefault:!1,setCloseLogOnClick:function(a){this.closeLogOnClick=!!a},close:function(a,b){var e,f,c=b&&!isNaN(b)?+b:this.delay,d=this;this.closeLogOnClick&&a.addEventListener("click",function(){e(a)}),f=function(a){a.stopPropagation(),this.removeEventListener(d.transition.type,f),q(this)},e=function(a){var b=1;"undefined"!==typeof a&&a.parentNode===j&&(d.transition.supported&&(a.addEventListener(d.transition.type,f),a.className+=" alertify-log-hide",b=500),setTimeout(function(){q(a)},b||1))},0!==b&&setTimeout(function(){e(a)},c)},dialog:function(a,b,c,e){this.init(),f.push({type:b,message:a,onOkay:c,onCancel:e}),d||this.setup()},hide:function(){var a,b=this;f.splice(0,1),f.length>0?this.setup(!0):(d=!1,a=function(c){c.stopPropagation(),i.removeEventListener(b.transition.type,a)},this.transition.supported&&i.addEventListener(this.transition.type,a),i.className="alertify alertify-hide alertify-hidden")},init:function(){this.injectCss(),null===p("alertify")&&(d=!1,f=[],i=c.createElement("div"),i.setAttribute("id","alertify"),i.className="alertify alertify-hidden",c.body.appendChild(i)),null===p("alertify-logs")&&(j=c.createElement("div"),j.setAttribute("id","alertify-logs"),j.className="alertify-logs",c.body.appendChild(j)),this.transition=r()},log:function(a,b,c){this.init(),j.className="alertify-logs";var d=j.childNodes.length-this.maxLogItems;if(d>=0)for(var e=0,f=d+1;e<f;e++)this.close(j.childNodes[e],1);this.notify(a,b,c)},notify:function(a,b,d){var e=c.createElement("div");e.className="alertify-log alertify-log-"+(b||"default"),e.innerHTML=a,"function"===typeof d&&e.addEventListener("click",d),j.appendChild(e),setTimeout(function(){e.className+=" alertify-log-show"},50),this.close(e,this.delay)},setup:function(a){var c=f[0],e=this,j=function(){i.removeEventListener(e.transition.type,j)};d=!0,this.transition.supported&&!a&&i.addEventListener(this.transition.type,j),i.innerHTML=this.build(c),h=p("alertify-ok")||b,g=p("alertify-cancel")||b,l=p("alertify-text")||b,k=p("alertify-form")||b,l&&("string"===typeof this.promptPlaceholder&&(l.placeholder=this.promptPlaceholder),"string"===typeof this.promptValue&&(l.value=this.promptValue)),this.addListeners(c.onOkay,c.onCancel)},okBtn:function(a){return this.okLabel=a,this},setDelay:function(a){var b=parseInt(a||0,10);return this.delay=isNaN(b)?this.defultDelay:a,this},cancelBtn:function(a){return this.cancelLabel=a,this},setMaxLogItems:function(a){this.maxLogItems=parseInt(a||this.defaultMaxLogItems)},reset:function(){this.okBtn(this.defaultOkLabel),this.cancelBtn(this.defaultCancelLabel),this.setMaxLogItems(),this.promptValue="",this.promptPlaceholder="",this.delay=this.defaultDelay,this.setCloseLogOnClick(this.closeLogOnClickDefault)},injectCss:function(){if(!a){var b=c.getElementsByTagName("head")[0],d=c.createElement("style");d.type="text/css",d.innerHTML="/* style.css */",b.insertBefore(d,b.firstChild),a=!0}}};return{reset:function(){return s.reset(),this},alert:function(a,b,c){return s.dialog(a,"alert",b,c),this},confirm:function(a,b,c){return s.dialog(a,"confirm",b,c),this},prompt:function(a,b,c){return s.dialog(a,"prompt",b,c),this},log:function(a,b){return s.log(a,"default",b),this},success:function(a,b){return s.log(a,"success",b),this},error:function(a,b){return s.log(a,"error",b),this},cancelBtn:function(a){return s.cancelBtn(a),this},okBtn:function(a){return s.okBtn(a),this},delay:function(a){return s.setDelay(a),this},placeholder:function(a){return s.promptPlaceholder=a,this},defaultValue:function(a){return s.promptValue=a,this},maxLogItems:function(a){return s.setMaxLogItems(a),this},closeLogOnClick:function(a){return s.setCloseLogOnClick(!!a),this}}},"undefined"!==typeof module&&module&&module.exports?module.exports=d:"function"===typeof define&&define.amd?define(function(){return new d}):a.alertify=new d}("undefined"!==typeof window?window:{});